# 메이플스토리 골드리치의 비밀금고 번호 추천 웹사이트 - 최종 요건 정의서

## 📋 프로젝트 개요

### 프로젝트명

메이플스토리 골드리치의 비밀금고 이벤트 번호 추천 웹사이트

### 목표

골드리치의 비밀금고 이벤트에서 당첨될 가능성이 높은 번호를 AI 분석을 통해 추천해주는 웹사이트

### 핵심 기능

- 이벤트 결과 데이터 관리 (API를 통한 자동화)
- AI 기반 번호 추천 시스템 (Claude/GPT)
- 사용자 맞춤형 추천 개수 설정 (1~10개)
- 통계적 분석 및 당첨 통계 제공

## 🎯 핵심 기능 요건

### 1. 데이터 관리 시스템

- **데이터베이스**: Supabase 사용
- **데이터 입력**: API를 통해 DB에 자동 저장
- **데이터 구조**:
  - 당첨 번호 목록 (주요 데이터)
  - 날짜별 결과
- **히스토리 관리**: 프로젝트 종료 전까지 보관
- **백업**: 불필요

### 2. AI 분석 시스템

- **AI 모델**: Claude API + GPT API (사용자 선택 가능)
- **분석 방식**:
  - 미리 정의된 분석만 제공
  - 과거 데이터 분석
  - 패턴 인식
  - 중복 위험도 분석
  - 당첨 확률 계산
- **응답 형태**: 번호 추천 + 분석 근거
- **사용량 제한**: API 사용량 제한 필요

### 3. 추천 시스템

- **추천 개수**: 1~10개 (사용자가 설정 가능)
- **기본값**: 1개
- **추천 기준**:
  - 안전성 (중복 위험도)
  - 당첨 확률
  - 과거 패턴 분석
  - 통계적 분석 (가장 많이 선택된 번호, 중복 빈도 등)
- **추천 히스토리**: 사용자 추천 기록 저장

## ✅ 확정된 요건

### 데이터 관리

- ✅ **결과 데이터**: 당첨 번호 목록만 수집
- ✅ **데이터 입력**: API를 통한 자동화
- ✅ **히스토리**: 프로젝트 종료 전까지 보관
- ❌ **백업**: 불필요

### AI 분석 기능

- ✅ **분석 방식**: 미리 정의된 분석만 제공
- ✅ **응답 형태**: 번호 추천 + 분석 근거
- ✅ **AI 모델**: Claude/GPT 사용자 선택 가능
- ✅ **사용량 제한**: API 사용량 제한 필요

### 사용자 인터페이스

- ❌ **사용자 인증**: 불필요
- ✅ **모바일 지원**: 필요
- ✅ **UI/UX**: 현대적 모던한 스타일

### 추천 시스템

- ✅ **통계적 분석**: AI 외에도 통계적 분석 제공
- ✅ **기본값**: 1개
- ✅ **추천 히스토리**: 사용자 기록 저장

### 추가 기능

- ✅ **당첨 통계**: 필요
- ✅ **인기 번호 분석**: 필요
- ❌ **전체 참여 현황**: 불필요

### 기술적 요구사항

- ✅ **배포**: Vercel + Next.js API Routes
- ❌ **도메인**: 불필요
- ✅ **성능**: 동시 사용자 4명 예상
- ✅ **API 키 보안**: 필요
- ✅ **에러 로깅**: 필요
- ✅ **사용량 모니터링**: 필요
- ❌ **데이터 암호화**: 불필요

## 📊 개발 우선순위

### Phase 1 (MVP - 최소 기능 제품)

- ✅ 기본 데이터 입력/관리 시스템
- ✅ AI 번호 추천 기능
- ✅ 추천 개수 설정 기능
- ✅ 기본 웹 인터페이스

### Phase 2 (기능 확장)

- ❌ 사용자 인증 시스템 (불필요)
- ❌ 개인화 기능 (불필요)
- ✅ 통계 대시보드
- ✅ 모바일 최적화

### Phase 3 (고급 기능)

- ❌ 커뮤니티 기능 (불필요)
- ❌ 실시간 알림 (불필요)
- ✅ 고급 분석 도구
- ❌ API 제공 (불필요)

## 🛠 확정된 기술 스택

### Frontend

- **프레임워크**: Next.js
- **언어**: TypeScript
- **스타일링**: Tailwind CSS + Shadcn
- **상태 관리**: Zustand + React-Query

### Backend

- **데이터베이스**: Supabase
- **API**: Next.js API Routes
- **AI**: Claude API + OpenAI GPT API

### 배포

- **호스팅**: Vercel
- **도메인**: Vercel 기본 도메인 사용

## 📅 개발 일정

### 1주차: 프로젝트 설정 및 기본 구조

- ✅ 프로젝트 초기 설정
- ✅ Supabase 데이터베이스 설계
- ✅ 기본 UI 컴포넌트

### 2주차: 데이터 관리 시스템

- ✅ 데이터 입력 인터페이스
- ✅ 데이터베이스 연동
- ✅ 기본 CRUD 기능

### 3주차: AI 분석 시스템

- ✅ AI API 연동
- ✅ 번호 추천 로직
- ✅ 분석 결과 표시

### 4주차: 사용자 인터페이스 완성

- ✅ 추천 개수 설정
- ✅ 반응형 디자인
- ✅ 사용자 경험 개선

### 5주차: 테스트 및 배포

- ✅ 기능 테스트
- ✅ 성능 최적화
- ✅ 배포 및 설정

## 🔧 구현 세부사항

### 데이터베이스 스키마

```sql
-- 당첨 결과 테이블
CREATE TABLE winning_results (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL,
  winning_numbers INTEGER[] NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 추천 히스토리 테이블
CREATE TABLE recommendation_history (
  id SERIAL PRIMARY KEY,
  user_session_id VARCHAR(255),
  recommended_numbers INTEGER[] NOT NULL,
  ai_model VARCHAR(50),
  count_requested INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### API 엔드포인트

- `POST /api/results` - 당첨 결과 추가
- `GET /api/results` - 당첨 결과 조회
- `POST /api/recommend` - AI 번호 추천
- `GET /api/statistics` - 통계 데이터

### 환경 변수

```env
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_key
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_claude_key
```

## 🏗️ 개발 원칙 및 아키텍처

### 아키텍처 원칙

- **Clean Architecture**: Presentation, Business, Data Layer 명확히 분리
- **SOLID 원칙**: 단일 책임, 개방-폐쇄, 리스코프 치환, 인터페이스 분리, 의존성 역전 원칙 적용
- **도메인 중심 설계**: 비즈니스 도메인별로 폴더 구성
- **의존성 방향**: 외부 의존성은 항상 내부로 향하도록 설계

### 개발 원칙

- **테스트 우선**: 비즈니스 로직 구현 전 반드시 테스트 작성
- **단순성**: 복잡한 솔루션보다 가장 단순한 솔루션 우선
- **DRY 원칙**: 코드 중복 방지, 기존 기능 재사용
- **가드레일**: 개발/프로덕션 환경에서 모의 데이터 사용 금지

### 코드 품질

- **타입 안전성**: TypeScript 엄격 모드 사용
- **린팅**: ESLint + Prettier 설정
- **테스트 커버리지**: 핵심 비즈니스 로직 80% 이상
- **에러 처리**: 적절한 에러 핸들링 및 로깅

### 보안 원칙

- **민감 정보**: API 키, 패스워드 절대 하드코딩 금지
- **입력 검증**: 모든 외부 입력에 대한 검증 및 필터링
- **환경 변수**: 설정값은 환경 변수로 관리
- **로깅**: 민감 정보 제외한 적절한 로깅

### 프로젝트 구조

```
src/
├── app/                    # Next.js App Router
├── components/             # 재사용 가능한 UI 컴포넌트
│   ├── ui/                # Shadcn UI 컴포넌트
│   └── features/          # 도메인별 컴포넌트
├── lib/                   # 유틸리티 및 설정
│   ├── supabase/          # Supabase 클라이언트
│   ├── ai/                # AI API 클라이언트
│   └── utils/             # 공통 유틸리티
├── types/                 # TypeScript 타입 정의
├── hooks/                 # 커스텀 React 훅
└── tests/                 # 테스트 파일
```

### 테스트 전략

- **단위 테스트**: Jest + React Testing Library
- **통합 테스트**: API 엔드포인트 테스트
- **E2E 테스트**: Playwright (선택사항)
- **테스트 데이터**: 실제 데이터 구조 기반

### 성능 최적화

- **번들 최적화**: Next.js 자동 최적화 활용
- **이미지 최적화**: Next.js Image 컴포넌트 사용
- **캐싱**: 적절한 레벨에서 캐싱 적용
- **코드 스플리팅**: 동적 import 활용

### 배포 및 운영

- **CI/CD**: GitHub Actions 자동화
- **환경 분리**: 개발, 스테이징, 프로덕션 환경 분리
- **모니터링**: Vercel Analytics + 에러 로깅
- **백업**: Supabase 자동 백업 활용

---

_이 문서는 메이플스토리 골드리치의 비밀금고 번호 추천 웹사이트의 최종 요건 정의서입니다._
